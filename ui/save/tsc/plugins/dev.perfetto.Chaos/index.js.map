{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../src/plugins/dev.perfetto.Chaos/index.ts"],"names":[],"mappings":";AAAA,qDAAqD;AACrD,EAAE;AACF,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,kDAAkD;AAClD,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;AAIjC,uEAAwE;AAGxE;IACE,MAAM,CAAU,EAAE,GAAG,oBAAoB,CAAC;IAE1C,MAAM,CAAC,UAAU,CAAC,GAAQ;QACxB,GAAG,CAAC,QAAQ,CAAC,eAAe,CAAC;YAC3B,EAAE,EAAE,6BAA6B;YACjC,IAAI,EAAE,kBAAkB;YACxB,QAAQ,EAAE,GAAG,EAAE;gBACb,MAAM,IAAI,KAAK,CAAC,+CAA+C,CAAC,CAAC;YACnE,CAAC;SACF,CAAC,CAAC;IACL,CAAC;IAED,KAAK,CAAC,WAAW,CAAC,GAAU;QAC1B,GAAG,CAAC,QAAQ,CAAC,eAAe,CAAC;YAC3B,EAAE,EAAE,kCAAkC;YACtC,IAAI,EAAE,2BAA2B;YACjC,QAAQ,EAAE,GAAG,EAAE;gBACb,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC;;;;;;;SAOhB,CAAC,CAAC;YACL,CAAC;SACF,CAAC,CAAC;QAEH,GAAG,CAAC,QAAQ,CAAC,eAAe,CAAC;YAC3B,EAAE,EAAE,0CAA0C;YAC9C,IAAI,EAAE,iCAAiC;YACvC,QAAQ,EAAE,GAAG,EAAE;gBACb,IAAA,iCAAkB,EAAC;oBACjB,KAAK,EAAE,GAAG;oBACV,IAAI,EAAE;wBACJ,SAAS,EAAE;;;;;;aAMV;qBACF;oBACD,KAAK,EAAE,aAAa;iBACrB,CAAC,CAAC;YACL,CAAC;SACF,CAAC,CAAC;IACL,CAAC;;AAhDH,4BAiDC","sourcesContent":["// Copyright (C) 2024 The Android Open Source Project\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Trace} from '../../public/trace';\nimport {App} from '../../public/app';\nimport {addDebugSliceTrack} from '../../components/tracks/debug_tracks';\nimport {PerfettoPlugin} from '../../public/plugin';\n\nexport default class implements PerfettoPlugin {\n  static readonly id = 'dev.perfetto.Chaos';\n\n  static onActivate(ctx: App): void {\n    ctx.commands.registerCommand({\n      id: 'dev.perfetto.Chaos#CrashNow',\n      name: 'Chaos: crash now',\n      callback: () => {\n        throw new Error('Manual crash from dev.perfetto.Chaos#CrashNow');\n      },\n    });\n  }\n\n  async onTraceLoad(ctx: Trace): Promise<void> {\n    ctx.commands.registerCommand({\n      id: 'dev.perfetto.Chaos#CrashNowQuery',\n      name: 'Chaos: run crashing query',\n      callback: () => {\n        ctx.engine.query(`this is a\n          syntactically\n          invalid\n          query\n          over\n          many\n          lines\n        `);\n      },\n    });\n\n    ctx.commands.registerCommand({\n      id: 'dev.perfetto.Chaos#AddCrashingDebugTrack',\n      name: 'Chaos: add crashing debug track',\n      callback: () => {\n        addDebugSliceTrack({\n          trace: ctx,\n          data: {\n            sqlSource: `\n              syntactically\n              invalid\n              query\n              over\n              many\n            `,\n          },\n          title: `Chaos track`,\n        });\n      },\n    });\n  }\n}\n"]}