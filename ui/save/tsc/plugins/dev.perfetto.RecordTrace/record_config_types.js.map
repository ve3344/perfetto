{"version":3,"file":"record_config_types.js","sourceRoot":"","sources":["../../../../src/plugins/dev.perfetto.RecordTrace/record_config_types.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (C) 2021 The Android Open Source Project\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {z} from 'zod';\n\nconst recordModes = ['STOP_WHEN_FULL', 'RING_BUFFER', 'LONG_TRACE'] as const;\nexport const RECORD_CONFIG_SCHEMA = z\n  .object({\n    mode: z.enum(recordModes).default('STOP_WHEN_FULL'),\n    durationMs: z.number().default(10000.0),\n    maxFileSizeMb: z.number().default(100),\n    fileWritePeriodMs: z.number().default(2500),\n    bufferSizeMb: z.number().default(64.0),\n\n    cpuSched: z.boolean().default(false),\n    cpuFreq: z.boolean().default(false),\n    cpuFreqPollMs: z.number().default(1000),\n    cpuSyscall: z.boolean().default(false),\n\n    gpuFreq: z.boolean().default(false),\n    gpuMemTotal: z.boolean().default(false),\n    gpuWorkPeriod: z.boolean().default(false),\n\n    ftrace: z.boolean().default(false),\n    atrace: z.boolean().default(false),\n    ftraceEvents: z.array(z.string()).default([]),\n    ftraceExtraEvents: z.string().default(''),\n    atraceCats: z.array(z.string()).default([]),\n    allAtraceApps: z.boolean().default(true),\n    atraceApps: z.string().default(''),\n    ftraceBufferSizeKb: z.number().default(0),\n    ftraceDrainPeriodMs: z.number().default(0),\n    androidLogs: z.boolean().default(false),\n    androidLogBuffers: z.array(z.string()).default([]),\n    androidFrameTimeline: z.boolean().default(false),\n    androidGameInterventionList: z.boolean().default(false),\n    androidNetworkTracing: z.boolean().default(false),\n    androidNetworkTracingPollMs: z.number().default(250),\n    androidStatsd: z.boolean().default(false),\n    androidStatsdRawPushedAtoms: z.string().default(''),\n    androidStatsdRawPulledAtoms: z.string().default(''),\n    androidStatsdPushedAtoms: z.array(z.string()).default([]),\n    androidStatsdPulledAtoms: z.array(z.string()).default([]),\n    androidStatsdPulledAtomPackages: z.string().default(''),\n    androidStatsdPulledAtomPullFrequencyMs: z.number().default(5000),\n\n    cpuCoarse: z.boolean().default(false),\n    cpuCoarsePollMs: z.number().default(1000),\n\n    batteryDrain: z.boolean().default(false),\n    batteryDrainPollMs: z.number().default(1000),\n\n    boardSensors: z.boolean().default(false),\n\n    memHiFreq: z.boolean().default(false),\n    meminfo: z.boolean().default(false),\n    meminfoPeriodMs: z.number().default(1000),\n    meminfoCounters: z.array(z.string()).default([]),\n\n    vmstat: z.boolean().default(false),\n    vmstatPeriodMs: z.number().default(1000),\n    vmstatCounters: z.array(z.string()).default([]),\n\n    heapProfiling: z.boolean().default(false),\n    hpSamplingIntervalBytes: z.number().default(4096),\n    hpProcesses: z.string().default(''),\n    hpContinuousDumpsPhase: z.number().default(0),\n    hpContinuousDumpsInterval: z.number().default(0),\n    hpSharedMemoryBuffer: z.number().default(8 * 1048576),\n    hpBlockClient: z.boolean().default(true),\n    hpAllHeaps: z.boolean().default(false),\n\n    javaHeapDump: z.boolean().default(false),\n    jpProcesses: z.string().default(''),\n    jpContinuousDumpsPhase: z.number().default(0),\n    jpContinuousDumpsInterval: z.number().default(0),\n\n    memLmk: z.boolean().default(false),\n    procStats: z.boolean().default(false),\n    procStatsPeriodMs: z.number().default(1000),\n\n    chromeCategoriesSelected: z.array(z.string()).default([]),\n    chromeHighOverheadCategoriesSelected: z.array(z.string()).default([]),\n    chromePrivacyFiltering: z.boolean().default(false),\n\n    chromeLogs: z.boolean().default(false),\n    taskScheduling: z.boolean().default(false),\n    ipcFlows: z.boolean().default(false),\n    jsExecution: z.boolean().default(false),\n    webContentRendering: z.boolean().default(false),\n    uiRendering: z.boolean().default(false),\n    inputEvents: z.boolean().default(false),\n    navigationAndLoading: z.boolean().default(false),\n    audio: z.boolean().default(false),\n    video: z.boolean().default(false),\n\n    etwCSwitch: z.boolean().default(false),\n    etwThreadState: z.boolean().default(false),\n\n    symbolizeKsyms: z.boolean().default(false),\n\n    // Enabling stack sampling\n    tracePerf: z.boolean().default(false),\n    timebaseFrequency: z.number().default(100),\n    targetCmdLine: z.array(z.string()).default([]),\n\n    linuxDeviceRpm: z.boolean().default(false),\n  })\n  // .default({}) ensures that we can always default-construct a config and\n  // spots accidental missing .default(...)\n  .default({});\n\nexport const NAMED_RECORD_CONFIG_SCHEMA = z.object({\n  title: z.string(),\n  key: z.string(),\n  config: RECORD_CONFIG_SCHEMA,\n});\nexport type NamedRecordConfig = z.infer<typeof NAMED_RECORD_CONFIG_SCHEMA>;\nexport type RecordConfig = z.infer<typeof RECORD_CONFIG_SCHEMA>;\n\nexport function createEmptyRecordConfig(): RecordConfig {\n  return RECORD_CONFIG_SCHEMA.parse({});\n}\n"]}