{"version":3,"file":"screenshot_panel.js","sourceRoot":"","sources":["../../../../src/plugins/dev.perfetto.Screenshots/screenshot_panel.ts"],"names":[],"mappings":";AAAA,qDAAqD;AACrD,EAAE;AACF,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,kDAAkD;AAClD,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;;;AAEjC,8DAAwB;AACxB,gDAA8C;AAC9C,4CAAwC;AACxC,4DAAwE;AACxE,sEAAmE;AAKnE,MAAa,sBAAsB;IAGJ;IAFrB,YAAY,CAAgB;IAEpC,YAA6B,MAAc;QAAd,WAAM,GAAN,MAAM,CAAQ;IAAG,CAAC;IAE/C,KAAK,CAAC,IAAI,CAAC,SAA8B;QACvC,IAAI,CAAC,YAAY,GAAG,MAAM,IAAA,gBAAQ,EAChC,IAAI,CAAC,MAAM,EACX,IAAA,yBAAY,EAAC,SAAS,CAAC,OAAO,CAAC,CAChC,CAAC;IACJ,CAAC;IAED,MAAM;QACJ,IACE,CAAC,IAAA,cAAM,EAAC,IAAI,CAAC,YAAY,CAAC;YAC1B,CAAC,IAAA,cAAM,EAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC;YAC/B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,EAClC,CAAC;YACD,OAAO,IAAA,iBAAC,EAAC,IAAI,EAAE,oBAAoB,CAAC,CAAC;QACvC,CAAC;QACD,IAAA,oBAAU,EAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,sBAAsB,CAAC,CAAC;QACpE,OAAO,IAAA,iBAAC,EACN,mBAAmB,EACnB,IAAA,iBAAC,EAAC,KAAK,EAAE;YACP,GAAG,EAAE,yBAAyB,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,YAAY;SACxE,CAAC,CACH,CAAC;IACJ,CAAC;CACF;AA5BD,wDA4BC","sourcesContent":["// Copyright (C) 2023 The Android Open Source Project\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport m from 'mithril';\nimport {assertTrue} from '../../base/logging';\nimport {exists} from '../../base/utils';\nimport {getSlice, SliceDetails} from '../../components/sql_utils/slice';\nimport {asSliceSqlId} from '../../components/sql_utils/core_types';\nimport {Engine} from '../../trace_processor/engine';\nimport {TrackEventDetailsPanel} from '../../public/details_panel';\nimport {TrackEventSelection} from '../../public/selection';\n\nexport class ScreenshotDetailsPanel implements TrackEventDetailsPanel {\n  private sliceDetails?: SliceDetails;\n\n  constructor(private readonly engine: Engine) {}\n\n  async load(selection: TrackEventSelection) {\n    this.sliceDetails = await getSlice(\n      this.engine,\n      asSliceSqlId(selection.eventId),\n    );\n  }\n\n  render() {\n    if (\n      !exists(this.sliceDetails) ||\n      !exists(this.sliceDetails.args) ||\n      this.sliceDetails.args.length == 0\n    ) {\n      return m('h2', 'Loading Screenshot');\n    }\n    assertTrue(this.sliceDetails.args[0].key == 'screenshot.jpg_image');\n    return m(\n      '.screenshot-panel',\n      m('img', {\n        src: 'data:image/png;base64, ' + this.sliceDetails.args[0].displayValue,\n      }),\n    );\n  }\n}\n"]}