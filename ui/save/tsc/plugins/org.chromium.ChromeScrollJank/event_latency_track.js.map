{"version":3,"file":"event_latency_track.js","sourceRoot":"","sources":["../../../../src/plugins/org.chromium.ChromeScrollJank/event_latency_track.ts"],"names":[],"mappings":";AAAA,qDAAqD;AACrD,EAAE;AACF,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,kDAAkD;AAClD,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;;AAIjC,uGAG8D;AAC9D,+CAAyC;AAEzC,+EAA4E;AAG/D,QAAA,kBAAkB,GAAG,oBAAoB,CAAC;AAEvD,MAAa,iBAAkB,SAAQ,uDAAwB;IAInD;IAHV,YACE,KAAY,EACZ,GAAW,EACH,SAAiB;QAEzB,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;QAFV,cAAS,GAAT,SAAS,CAAQ;IAG3B,CAAC;IAED,gBAAgB;QACd,OAAO;YACL,YAAY,EAAE,IAAI,CAAC,SAAS;SAC7B,CAAC;IACJ,CAAC;IAED,UAAU,CAAC,GAAa;QACtB,MAAM,SAAS,GAAG,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;QACxC,IAAI,SAAS,CAAC,KAAK,KAAK,0BAAkB,EAAE,CAAC;YAC3C,OAAO,EAAC,GAAG,SAAS,EAAE,WAAW,EAAE,wBAAU,EAAC,CAAC;QACjD,CAAC;aAAM,CAAC;YACN,OAAO,SAAS,CAAC;QACnB,CAAC;IACH,CAAC;IAEQ,YAAY,CAAC,GAAwB;QAC5C,OAAO,IAAI,2DAA6B,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;IACpE,CAAC;CACF;AA3BD,8CA2BC","sourcesContent":["// Copyright (C) 2023 The Android Open Source Project\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {NamedRow} from '../../components/tracks/named_slice_track';\nimport {Slice} from '../../public/track';\nimport {\n  CustomSqlTableDefConfig,\n  CustomSqlTableSliceTrack,\n} from '../../components/tracks/custom_sql_table_slice_track';\nimport {JANK_COLOR} from './jank_colors';\nimport {TrackEventSelection} from '../../public/selection';\nimport {EventLatencySliceDetailsPanel} from './event_latency_details_panel';\nimport {Trace} from '../../public/trace';\n\nexport const JANKY_LATENCY_NAME = 'Janky EventLatency';\n\nexport class EventLatencyTrack extends CustomSqlTableSliceTrack {\n  constructor(\n    trace: Trace,\n    uri: string,\n    private baseTable: string,\n  ) {\n    super(trace, uri);\n  }\n\n  getSqlDataSource(): CustomSqlTableDefConfig {\n    return {\n      sqlTableName: this.baseTable,\n    };\n  }\n\n  rowToSlice(row: NamedRow): Slice {\n    const baseSlice = super.rowToSlice(row);\n    if (baseSlice.title === JANKY_LATENCY_NAME) {\n      return {...baseSlice, colorScheme: JANK_COLOR};\n    } else {\n      return baseSlice;\n    }\n  }\n\n  override detailsPanel(sel: TrackEventSelection) {\n    return new EventLatencySliceDetailsPanel(this.trace, sel.eventId);\n  }\n}\n"]}