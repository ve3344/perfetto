{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../src/plugins/org.chromium.ChromeCriticalUserInteractions/index.ts"],"names":[],"mappings":";AAAA,qDAAqD;AACrD,EAAE;AACF,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,kDAAkD;AAClD,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;AAIjC,uFAA+E;AAC/E,sDAAiD;AAEjD;IACE,MAAM,CAAU,EAAE,GAAG,sCAAsC,CAAC;IAC5D,KAAK,CAAC,WAAW,CAAC,GAAU;QAC1B,MAAM,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,8CAA8C,CAAC,CAAC;QAEvE,GAAG,CAAC,QAAQ,CAAC,eAAe,CAAC;YAC3B,EAAE,EAAE,sDAAsD;YAC1D,IAAI,EAAE,gCAAgC;YACtC,QAAQ,EAAE,GAAG,EAAE;gBACb,MAAM,KAAK,GAAG,IAAI,qBAAS,CAAC;oBAC1B,GAAG,EAAE,8DAA4B,CAAC,IAAI;oBACtC,KAAK,EAAE,qBAAqB;iBAC7B,CAAC,CAAC;gBACH,GAAG,CAAC,SAAS,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;gBACrC,KAAK,CAAC,GAAG,EAAE,CAAC;YACd,CAAC;SACF,CAAC,CAAC;QAEH,GAAG,CAAC,MAAM,CAAC,aAAa,CAAC;YACvB,GAAG,EAAE,8DAA4B,CAAC,IAAI;YACtC,IAAI,EAAE;gBACJ,IAAI,EAAE,8DAA4B,CAAC,IAAI;aACxC;YACD,KAAK,EAAE,qBAAqB;YAC5B,KAAK,EAAE,IAAI,8DAA4B,CACrC,GAAG,EACH,8DAA4B,CAAC,IAAI,CAClC;SACF,CAAC,CAAC;IACL,CAAC;;AA7BH,4BA8BC","sourcesContent":["// Copyright (C) 2023 The Android Open Source Project\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Trace} from '../../public/trace';\nimport {PerfettoPlugin} from '../../public/plugin';\nimport {CriticalUserInteractionTrack} from './critical_user_interaction_track';\nimport {TrackNode} from '../../public/workspace';\n\nexport default class implements PerfettoPlugin {\n  static readonly id = 'org.chromium.CriticalUserInteraction';\n  async onTraceLoad(ctx: Trace): Promise<void> {\n    await ctx.engine.query('include perfetto module chrome.interactions;');\n\n    ctx.commands.registerCommand({\n      id: 'perfetto.CriticalUserInteraction.AddInteractionTrack',\n      name: 'Add track: Chrome interactions',\n      callback: () => {\n        const track = new TrackNode({\n          uri: CriticalUserInteractionTrack.kind,\n          title: 'Chrome Interactions',\n        });\n        ctx.workspace.addChildInOrder(track);\n        track.pin();\n      },\n    });\n\n    ctx.tracks.registerTrack({\n      uri: CriticalUserInteractionTrack.kind,\n      tags: {\n        kind: CriticalUserInteractionTrack.kind,\n      },\n      title: 'Chrome Interactions',\n      track: new CriticalUserInteractionTrack(\n        ctx,\n        CriticalUserInteractionTrack.kind,\n      ),\n    });\n  }\n}\n"]}