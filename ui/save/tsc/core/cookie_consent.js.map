{"version":3,"file":"cookie_consent.js","sourceRoot":"","sources":["../../../src/core/cookie_consent.ts"],"names":[],"mappings":";AAAA,qDAAqD;AACrD,EAAE;AACF,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,kDAAkD;AAClD,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;;;AAEjC,8DAAwB;AACxB,mDAAoC;AACpC,yCAAmC;AAEnC,MAAM,cAAc,GAAG,WAAW,CAAC;AAEnC,MAAa,aAAa;IAChB,iBAAiB,GAAG,IAAI,CAAC;IAEjC,MAAM;QACJ,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IACE,CAAC,kBAAO,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,EAAE;YACvC,YAAY,CAAC,OAAO,CAAC,cAAc,CAAC,KAAK,MAAM,EAC/C,CAAC;YACD,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QACjC,CAAC;IACH,CAAC;IAED,IAAI;QACF,IAAI,CAAC,IAAI,CAAC,iBAAiB;YAAE,OAAO;QACpC,OAAO,IAAA,iBAAC,EACN,iBAAiB,EACjB,IAAA,iBAAC,EACC,cAAc,EACd;2BACmB,CACpB,EACD,IAAA,iBAAC,EACC,UAAU,EACV,IAAA,iBAAC,EACC,QAAQ,EACR,IAAA,iBAAC,EACC,GAAG,EACH;YACE,IAAI,EAAE,kDAAkD;YACxD,MAAM,EAAE,QAAQ;SACjB,EACD,cAAc,CACf,CACF,EACD,IAAA,iBAAC,EACC,QAAQ,EACR;YACE,OAAO,EAAE,GAAG,EAAE;gBACZ,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;gBAC/B,YAAY,CAAC,OAAO,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;gBAC7C,mBAAG,CAAC,kBAAkB,EAAE,CAAC;YAC3B,CAAC;SACF,EACD,IAAI,CACL,CACF,CACF,CAAC;IACJ,CAAC;CACF;AAjDD,sCAiDC","sourcesContent":["// Copyright (C) 2020 The Android Open Source Project\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport m from 'mithril';\nimport {raf} from './raf_scheduler';\nimport {AppImpl} from './app_impl';\n\nconst COOKIE_ACK_KEY = 'cookieAck';\n\nexport class CookieConsent implements m.ClassComponent {\n  private showCookieConsent = true;\n\n  oninit() {\n    this.showCookieConsent = true;\n    if (\n      !AppImpl.instance.analytics.isEnabled() ||\n      localStorage.getItem(COOKIE_ACK_KEY) === 'true'\n    ) {\n      this.showCookieConsent = false;\n    }\n  }\n\n  view() {\n    if (!this.showCookieConsent) return;\n    return m(\n      '.cookie-consent',\n      m(\n        '.cookie-text',\n        `This site uses cookies from Google to deliver its services and to\n          analyze traffic.`,\n      ),\n      m(\n        '.buttons',\n        m(\n          'button',\n          m(\n            'a',\n            {\n              href: 'https://policies.google.com/technologies/cookies',\n              target: '_blank',\n            },\n            'More details',\n          ),\n        ),\n        m(\n          'button',\n          {\n            onclick: () => {\n              this.showCookieConsent = false;\n              localStorage.setItem(COOKIE_ACK_KEY, 'true');\n              raf.scheduleFullRedraw();\n            },\n          },\n          'OK',\n        ),\n      ),\n    );\n  }\n}\n"]}