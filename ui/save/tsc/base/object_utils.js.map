{"version":3,"file":"object_utils.js","sourceRoot":"","sources":["../../../src/base/object_utils.ts"],"names":[],"mappings":";AAAA,qDAAqD;AACrD,EAAE;AACF,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,kDAAkD;AAClD,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;AA+BjC,0BAOC;AAmBD,0BAaC;AAED,sCAuBC;AAED,4BAEC;AAGD,kCAKC;AAzGD,uCAAuC;AACvC,mCAA+B;AAK/B;;;;;;;;;;;;;;;;;;;;;GAqBG;AACH,8DAA8D;AAC9D,SAAgB,OAAO,CAAI,GAAQ,EAAE,IAAU;IAC7C,IAAI,CAAC,GAAG,GAAG,CAAC;IACZ,KAAK,MAAM,IAAI,IAAI,IAAI,EAAE,CAAC;QACxB,IAAI,CAAC,KAAK,SAAS;YAAE,OAAO,SAAS,CAAC;QACtC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;IACd,CAAC;IACD,OAAO,CAAC,CAAC;AACX,CAAC;AAED;;;;;;;;;;;;;;;GAeG;AACH,8DAA8D;AAC9D,SAAgB,OAAO,CAAI,GAAQ,EAAE,IAAU,EAAE,KAAQ;IACvD,MAAM,SAAS,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC;IAC5B,IAAI,CAAC,GAAG,GAAG,CAAC;IACZ,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QAC5B,MAAM,CAAC,GAAG,IAAA,sBAAY,EAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC;QAC1C,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACX,CAAC;IAED,MAAM,CAAC,GAAG,SAAS,CAAC,KAAK,EAAE,CAAC;IAC5B,IAAI,CAAC,IAAA,cAAM,EAAC,CAAC,CAAC,EAAE,CAAC;QACf,MAAM,SAAS,CAAC,qBAAqB,CAAC,CAAC;IACzC,CAAC;IACD,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;AACf,CAAC;AAED,SAAgB,aAAa,CAAC,CAAU,EAAE,CAAU;IAClD,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;QACZ,OAAO,IAAI,CAAC;IACd,CAAC;IACD,IAAI,CAAC,KAAK,SAAS,IAAI,CAAC,KAAK,SAAS,EAAE,CAAC;QACvC,OAAO,KAAK,CAAC;IACf,CAAC;IACD,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC;QAC7B,OAAO,KAAK,CAAC;IACf,CAAC;IACD,MAAM,IAAI,GAAG,CAAsB,CAAC;IACpC,MAAM,IAAI,GAAG,CAAsB,CAAC;IACpC,KAAK,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;QACpC,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC;YAC5B,OAAO,KAAK,CAAC;QACf,CAAC;IACH,CAAC;IACD,KAAK,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;QACpC,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC;YAC5B,OAAO,KAAK,CAAC;QACf,CAAC;IACH,CAAC;IACD,OAAO,IAAI,CAAC;AACd,CAAC;AAED,SAAgB,QAAQ,CAAC,CAAU;IACjC,OAAO,OAAO,CAAC,KAAK,QAAQ,IAAI,CAAC,YAAY,MAAM,CAAC;AACtD,CAAC;AAED,8EAA8E;AAC9E,SAAgB,WAAW,CACzB,GAAM,EACN,KAAc;IAEd,OAAO,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AAC5C,CAAC","sourcesContent":["// Copyright (C) 2023 The Android Open Source Project\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {assertExists} from './logging';\nimport {exists} from './utils';\n\nexport type PathKey = string | number;\nexport type Path = PathKey[];\n\n/**\n * Gets the |value| at a |path| of |object|. If a portion of the path doesn't\n * exist, |undefined| is returned.\n *\n * Example:\n * const obj = {\n *   a: [\n *     {b: 'c'},\n *     {d: 'e', f: 123},\n *   ],\n * };\n * getPath(obj, ['a']) -> [{b: 'c'}, {d: 'e', f: 123}]\n * getPath(obj, ['a', 1]) -> {d: 'e', f: 123}\n * getPath(obj, ['a', 1, 'd']) -> 'e'\n * getPath(obj, ['g']) -> undefined\n * getPath(obj, ['g', 'h']) -> undefined\n *\n * Note: This is an appropriate use of `any`, as we are knowingly getting fast\n * and loose with the type system in this function: it's basically JavaScript.\n * Attempting to pretend it's anything else would result in superfluous type\n * assertions which would serve no benefit.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function getPath<T>(obj: any, path: Path): T | undefined {\n  let x = obj;\n  for (const node of path) {\n    if (x === undefined) return undefined;\n    x = x[node];\n  }\n  return x;\n}\n\n/**\n * Sets the |value| at |path| of |object|. If the final node of the path doesn't\n * exist, the value will be created. Otherwise, TypeError is thrown.\n *\n * Example:\n * const obj = {\n *   a: [\n *     {b: 'c'},\n *     {d: 'e', f: 123},\n *   ],\n * };\n * setPath(obj, ['a'], 'foo') -> {a: 'foo'}\n * setPath(obj, ['a', 1], 'foo') -> {a: [{b: 'c'}, 'foo']}\n * setPath(obj, ['g'], 'foo') -> {a: [...], g: 'foo'}\n * setPath(obj, ['g', 'h'], 'foo') -> TypeError!\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function setPath<T>(obj: any, path: Path, value: T): void {\n  const pathClone = [...path];\n  let o = obj;\n  while (pathClone.length > 1) {\n    const p = assertExists(pathClone.shift());\n    o = o[p];\n  }\n\n  const p = pathClone.shift();\n  if (!exists(p)) {\n    throw TypeError('Path array is empty');\n  }\n  o[p] = value;\n}\n\nexport function shallowEquals(a: unknown, b: unknown) {\n  if (a === b) {\n    return true;\n  }\n  if (a === undefined || b === undefined) {\n    return false;\n  }\n  if (a === null || b === null) {\n    return false;\n  }\n  const objA = a as {[_: string]: {}};\n  const objB = b as {[_: string]: {}};\n  for (const key of Object.keys(objA)) {\n    if (objA[key] !== objB[key]) {\n      return false;\n    }\n  }\n  for (const key of Object.keys(objB)) {\n    if (objA[key] !== objB[key]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function isString(s: unknown): s is string {\n  return typeof s === 'string' || s instanceof String;\n}\n\n// Given a string enum |enum|, check that |value| is a valid member of |enum|.\nexport function isEnumValue<T extends {}>(\n  enm: T,\n  value: unknown,\n): value is T[keyof T] {\n  return Object.values(enm).includes(value);\n}\n"]}