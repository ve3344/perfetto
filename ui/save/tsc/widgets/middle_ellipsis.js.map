{"version":3,"file":"middle_ellipsis.js","sourceRoot":"","sources":["../../../src/widgets/middle_ellipsis.ts"],"names":[],"mappings":";AAAA,qDAAqD;AACrD,EAAE;AACF,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,kDAAkD;AAClD,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;;;AAEjC,8DAAwB;AAOxB,SAAS,oCAAoC,CAAC,IAAY;IACxD,OAAO,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,UAAU,KAAK;QAC/C,OAAO,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IACvC,CAAC,CAAC,CAAC;AACL,CAAC;AAED;;;;GAIG;AACH,MAAa,cAAc;IACzB,IAAI,CAAC,EAAC,KAAK,EAAE,QAAQ,EAA+B;QAClD,MAAM,EAAC,IAAI,EAAE,QAAQ,GAAG,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAC,GAAG,KAAK,CAAC;QAC3D,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC;QAC5B,MAAM,KAAK,GAAG,OAAO,CAAC,MAAM,GAAG,QAAQ,CAAC;QACxC,MAAM,IAAI,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;QACzC,MAAM,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACvC,OAAO,IAAA,iBAAC,EACN,qBAAqB,EACrB,IAAA,iBAAC,EACC,8BAA8B,EAC9B,oCAAoC,CAAC,IAAI,CAAC,CAC3C,EACD,IAAA,iBAAC,EACC,+BAA+B,EAC/B,oCAAoC,CAAC,KAAK,CAAC,CAC5C,EACD,QAAQ,CACT,CAAC;IACJ,CAAC;CACF;AApBD,wCAoBC","sourcesContent":["// Copyright (C) 2024 The Android Open Source Project\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport m from 'mithril';\n\nexport interface MiddleEllipsisAttrs {\n  text: string;\n  endChars?: number;\n}\n\nfunction replaceLeadingTrailingSpacesWithNbsp(text: string) {\n  return text.replace(/^\\s+|\\s+$/g, function (match) {\n    return '\\u00A0'.repeat(match.length);\n  });\n}\n\n/**\n * Puts ellipsis in the middle of a long string, rather than putting them at\n * either end, for occasions where the start and end of the text are more\n * important than the middle.\n */\nexport class MiddleEllipsis implements m.ClassComponent<MiddleEllipsisAttrs> {\n  view({attrs, children}: m.Vnode<MiddleEllipsisAttrs>): m.Children {\n    const {text, endChars = text.length > 16 ? 10 : 0} = attrs;\n    const trimmed = text.trim();\n    const index = trimmed.length - endChars;\n    const left = trimmed.substring(0, index);\n    const right = trimmed.substring(index);\n    return m(\n      '.pf-middle-ellipsis',\n      m(\n        'span.pf-middle-ellipsis-left',\n        replaceLeadingTrailingSpacesWithNbsp(left),\n      ),\n      m(\n        'span.pf-middle-ellipsis-right',\n        replaceLeadingTrailingSpacesWithNbsp(right),\n      ),\n      children,\n    );\n  }\n}\n"]}