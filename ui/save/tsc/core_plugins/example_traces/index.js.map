{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../src/core_plugins/example_traces/index.ts"],"names":[],"mappings":";AAAA,qDAAqD;AACrD,EAAE;AACF,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,kDAAkD;AAClD,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;AAEjC,kDAA4C;AAI5C,MAAM,yBAAyB,GAC7B,wEAAwE,CAAC;AAE3E,MAAM,wBAAwB,GAC5B,yFAAyF,CAAC;AAE5F,SAAS,YAAY,CAAC,GAAQ,EAAE,GAAW;IACzC,GAAG,CAAC,SAAS,CAAC,QAAQ,CAAC,eAAe,EAAE,oBAAoB,CAAC,CAAC;IAC9D,kBAAO,CAAC,QAAQ,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;AACzC,CAAC;AAED;IACE,MAAM,CAAU,EAAE,GAAG,wBAAwB,CAAC;IAC9C,MAAM,CAAC,UAAU,CAAC,GAAQ;QACxB,MAAM,qCAAqC,GACzC,+CAA+C,CAAC;QAClD,GAAG,CAAC,QAAQ,CAAC,eAAe,CAAC;YAC3B,EAAE,EAAE,qCAAqC;YACzC,IAAI,EAAE,sBAAsB;YAC5B,QAAQ,EAAE,GAAG,EAAE;gBACb,YAAY,CAAC,GAAG,EAAE,yBAAyB,CAAC,CAAC;YAC/C,CAAC;SACF,CAAC,CAAC;QACH,GAAG,CAAC,OAAO,CAAC,WAAW,CAAC;YACtB,OAAO,EAAE,gBAAgB;YACzB,SAAS,EAAE,qCAAqC;YAChD,IAAI,EAAE,aAAa;SACpB,CAAC,CAAC;QAEH,MAAM,oCAAoC,GACxC,8CAA8C,CAAC;QACjD,GAAG,CAAC,QAAQ,CAAC,eAAe,CAAC;YAC3B,EAAE,EAAE,oCAAoC;YACxC,IAAI,EAAE,qBAAqB;YAC3B,QAAQ,EAAE,GAAG,EAAE;gBACb,YAAY,CAAC,GAAG,EAAE,wBAAwB,CAAC,CAAC;YAC9C,CAAC;SACF,CAAC,CAAC;QACH,GAAG,CAAC,OAAO,CAAC,WAAW,CAAC;YACtB,OAAO,EAAE,gBAAgB;YACzB,SAAS,EAAE,oCAAoC;YAC/C,IAAI,EAAE,aAAa;SACpB,CAAC,CAAC;IACL,CAAC;;AAhCH,4BAiCC","sourcesContent":["// Copyright (C) 2024 The Android Open Source Project\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AppImpl} from '../../core/app_impl';\nimport {App} from '../../public/app';\nimport {PerfettoPlugin} from '../../public/plugin';\n\nconst EXAMPLE_ANDROID_TRACE_URL =\n  'https://storage.googleapis.com/perfetto-misc/example_android_trace_15s';\n\nconst EXAMPLE_CHROME_TRACE_URL =\n  'https://storage.googleapis.com/perfetto-misc/chrome_example_wikipedia.perfetto_trace.gz';\n\nfunction openTraceUrl(app: App, url: string): void {\n  app.analytics.logEvent('Trace Actions', 'Open example trace');\n  AppImpl.instance.openTraceFromUrl(url);\n}\n\nexport default class implements PerfettoPlugin {\n  static readonly id = 'perfetto.ExampleTraces';\n  static onActivate(ctx: App) {\n    const OPEN_EXAMPLE_ANDROID_TRACE_COMMAND_ID =\n      'perfetto.CoreCommands#openExampleAndroidTrace';\n    ctx.commands.registerCommand({\n      id: OPEN_EXAMPLE_ANDROID_TRACE_COMMAND_ID,\n      name: 'Open Android example',\n      callback: () => {\n        openTraceUrl(ctx, EXAMPLE_ANDROID_TRACE_URL);\n      },\n    });\n    ctx.sidebar.addMenuItem({\n      section: 'example_traces',\n      commandId: OPEN_EXAMPLE_ANDROID_TRACE_COMMAND_ID,\n      icon: 'description',\n    });\n\n    const OPEN_EXAMPLE_CHROME_TRACE_COMMAND_ID =\n      'perfetto.CoreCommands#openExampleChromeTrace';\n    ctx.commands.registerCommand({\n      id: OPEN_EXAMPLE_CHROME_TRACE_COMMAND_ID,\n      name: 'Open Chrome example',\n      callback: () => {\n        openTraceUrl(ctx, EXAMPLE_CHROME_TRACE_URL);\n      },\n    });\n    ctx.sidebar.addMenuItem({\n      section: 'example_traces',\n      commandId: OPEN_EXAMPLE_CHROME_TRACE_COMMAND_ID,\n      icon: 'description',\n    });\n  }\n}\n"]}