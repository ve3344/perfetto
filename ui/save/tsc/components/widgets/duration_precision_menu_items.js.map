{"version":3,"file":"duration_precision_menu_items.js","sourceRoot":"","sources":["../../../../src/components/widgets/duration_precision_menu_items.ts"],"names":[],"mappings":";AAAA,qDAAqD;AACrD,EAAE;AACF,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,kDAAkD;AAClD,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;;;AAEjC,8DAAwB;AACxB,6CAA4C;AAE5C,oDAAyE;AAMzE,MAAa,yBAAyB;IAGpC,IAAI,CAAC,EAAC,KAAK,EAA0C;QACnD,SAAS,cAAc,CAAC,KAAwB,EAAE,KAAa;YAC7D,OAAO,IAAA,iBAAC,EAAC,eAAQ,EAAE;gBACjB,KAAK;gBACL,MAAM,EAAE,KAAK,KAAK,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,iBAAiB;gBACxD,OAAO,EAAE,GAAG,EAAE;oBACZ,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,iBAAiB,GAAG,KAAK,CAAC;oBAC/C,KAAK,CAAC,KAAK,CAAC,kBAAkB,EAAE,CAAC;gBACnC,CAAC;aACF,CAAC,CAAC;QACL,CAAC;QAED,SAAS,0BAA0B;YACjC,QAAQ,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,eAAe,EAAE,CAAC;gBAC7C,KAAK,0BAAe,CAAC,QAAQ,CAAC;gBAC9B,KAAK,0BAAe,CAAC,GAAG,CAAC;gBACzB,KAAK,0BAAe,CAAC,OAAO;oBAC1B,OAAO,IAAI,CAAC;gBACd;oBACE,OAAO,KAAK,CAAC;YACjB,CAAC;QACH,CAAC;QAED,OAAO,IAAA,iBAAC,EACN,eAAQ,EACR;YACE,KAAK,EAAE,oBAAoB;YAC3B,QAAQ,EAAE,CAAC,0BAA0B,EAAE;YACvC,KAAK,EAAE,2CAA2C;SACnD,EACD,cAAc,CAAC,4BAAiB,CAAC,IAAI,EAAE,MAAM,CAAC,EAC9C,cAAc,CAAC,4BAAiB,CAAC,aAAa,EAAE,gBAAgB,CAAC,CAClE,CAAC;IACJ,CAAC;CACF;AArCD,8DAqCC","sourcesContent":["// Copyright (C) 2024 The Android Open Source Project\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport m from 'mithril';\nimport {MenuItem} from '../../widgets/menu';\nimport {Trace} from '../../public/trace';\nimport {DurationPrecision, TimestampFormat} from '../../public/timeline';\n\ninterface DurationPrecisionMenuItemAttrs {\n  trace: Trace;\n}\n\nexport class DurationPrecisionMenuItem\n  implements m.ClassComponent<DurationPrecisionMenuItemAttrs>\n{\n  view({attrs}: m.Vnode<DurationPrecisionMenuItemAttrs>) {\n    function renderMenuItem(value: DurationPrecision, label: string) {\n      return m(MenuItem, {\n        label,\n        active: value === attrs.trace.timeline.durationPrecision,\n        onclick: () => {\n          attrs.trace.timeline.durationPrecision = value;\n          attrs.trace.scheduleFullRedraw();\n        },\n      });\n    }\n\n    function durationPrecisionHasEffect() {\n      switch (attrs.trace.timeline.timestampFormat) {\n        case TimestampFormat.Timecode:\n        case TimestampFormat.UTC:\n        case TimestampFormat.TraceTz:\n          return true;\n        default:\n          return false;\n      }\n    }\n\n    return m(\n      MenuItem,\n      {\n        label: 'Duration precision',\n        disabled: !durationPrecisionHasEffect(),\n        title: 'Not configurable with current time format',\n      },\n      renderMenuItem(DurationPrecision.Full, 'Full'),\n      renderMenuItem(DurationPrecision.HumanReadable, 'Human readable'),\n    );\n  }\n}\n"]}