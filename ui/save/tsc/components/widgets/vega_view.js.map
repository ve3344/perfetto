{"version":3,"file":"vega_view.js","sourceRoot":"","sources":["../../../../src/components/widgets/vega_view.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (C) 2023 The Android Open Source Project\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport m from 'mithril';\nimport * as vega from 'vega';\nimport * as vegaLite from 'vega-lite';\nimport {getErrorMessage} from '../../base/errors';\nimport {isString, shallowEquals} from '../../base/object_utils';\nimport {SimpleResizeObserver} from '../../base/resize_observer';\nimport {Engine} from '../../trace_processor/engine';\nimport {QueryError} from '../../trace_processor/query_result';\nimport {scheduleFullRedraw} from '../../widgets/raf';\nimport {Spinner} from '../../widgets/spinner';\n\nfunction isVegaLite(spec: unknown): boolean {\n  if (typeof spec === 'object') {\n    const schema = (spec as {$schema: unknown})['$schema'];\n    if (schema !== undefined && isString(schema)) {\n      // If the schema is available use that:\n      return schema.includes('vega-lite');\n    }\n  }\n  // Otherwise assume vega-lite:\n  return true;\n}\n\nexport interface VegaViewData {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  [name: string]: any;\n}\n\ninterface VegaViewAttrs {\n  spec: string;\n  data: VegaViewData;\n  engine?: Engine;\n}\n\n// VegaWrapper is in exactly one of these states:\nenum Status {\n  // Has not visualisation to render.\n  Empty,\n  // Currently loading the visualisation.\n  Loading,\n  // Failed to load or render the visualisation. The reason is\n  // retrievable via |error|.\n  Error,\n  // Displaying a visualisation:\n  Done,\n}\n\nclass EngineLoader implements vega.Loader {\n  private engine?: Engine;\n  private loader: vega.Loader;\n\n  constructor(engine: Engine | undefined) {\n    this.engine = engine;\n    this.loader = vega.loader();\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  async load(uri: string, _options?: any): Promise<string> {\n    if (this.engine === undefined) {\n      return '';\n    }\n    try {\n      const result = await this.engine.query(uri);\n      const columns = result.columns();\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const rows: any[] = [];\n      for (const it = result.iter({}); it.valid(); it.next()) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const row: any = {};\n        for (const name of columns) {\n          let value = it.get(name);\n          if (typeof value === 'bigint') {\n            value = Number(value);\n          }\n          row[name] = value;\n        }\n        rows.push(row);\n      }\n      return JSON.stringify(rows);\n    } catch (e) {\n      if (e instanceof QueryError) {\n        console.error(e);\n        return '';\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  sanitize(uri: string, options: any): Promise<{href: string}> {\n    return this.loader.sanitize(uri, options);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  http(uri: string, options: any): Promise<string> {\n    return this.loader.http(uri, options);\n  }\n\n  file(filename: string): Promise<string> {\n    return this.loader.file(filename);\n  }\n}\n\nclass VegaWrapper {\n  private dom: Element;\n  private _spec?: string;\n  private _data?: VegaViewData;\n  private view?: vega.View;\n  private pending?: Promise<vega.View>;\n  private _status: Status;\n  private _error?: string;\n  private _engine?: Engine;\n\n  constructor(dom: Element) {\n    this.dom = dom;\n    this._status = Status.Empty;\n  }\n\n  get status(): Status {\n    return this._status;\n  }\n\n  get error(): string {\n    return this._error ?? '';\n  }\n\n  set spec(value: string) {\n    if (this._spec !== value) {\n      this._spec = value;\n      this.updateView();\n    }\n  }\n\n  set data(value: VegaViewData) {\n    if (this._data === value || shallowEquals(this._data, value)) {\n      return;\n    }\n    this._data = value;\n    this.updateView();\n  }\n\n  set engine(engine: Engine | undefined) {\n    this._engine = engine;\n  }\n\n  onResize() {\n    if (this.view) {\n      this.view.resize();\n    }\n  }\n\n  private updateView() {\n    this._status = Status.Empty;\n    this._error = undefined;\n\n    // We no longer care about inflight renders:\n    if (this.pending) {\n      this.pending = undefined;\n    }\n\n    // Destroy existing view if needed:\n    if (this.view) {\n      this.view.finalize();\n      this.view = undefined;\n    }\n\n    // If the spec and data are both available then create a new view:\n    if (this._spec !== undefined && this._data !== undefined) {\n      let spec;\n      try {\n        spec = JSON.parse(this._spec);\n      } catch (e) {\n        this.setError(e);\n        return;\n      }\n\n      if (isVegaLite(spec)) {\n        try {\n          spec = vegaLite.compile(spec, {}).spec;\n        } catch (e) {\n          this.setError(e);\n          return;\n        }\n      }\n\n      // Create the runtime and view the bind the host DOM element\n      // and any data.\n      const runtime = vega.parse(spec);\n      this.view = new vega.View(runtime, {\n        loader: new EngineLoader(this._engine),\n      });\n      this.view.initialize(this.dom);\n      for (const [key, value] of Object.entries(this._data)) {\n        this.view.data(key, value);\n      }\n\n      const pending = this.view.runAsync();\n      pending\n        .then(() => {\n          this.handleComplete(pending);\n        })\n        .catch((err) => {\n          this.handleError(pending, err);\n        });\n      this.pending = pending;\n      this._status = Status.Loading;\n    }\n  }\n\n  private handleComplete(pending: Promise<vega.View>) {\n    if (this.pending !== pending) {\n      return;\n    }\n    this._status = Status.Done;\n    this.pending = undefined;\n    scheduleFullRedraw('force');\n  }\n\n  private handleError(pending: Promise<vega.View>, err: unknown) {\n    if (this.pending !== pending) {\n      return;\n    }\n    this.pending = undefined;\n    this.setError(err);\n  }\n\n  private setError(err: unknown) {\n    this._status = Status.Error;\n    this._error = getErrorMessage(err);\n    scheduleFullRedraw('force');\n  }\n\n  [Symbol.dispose]() {\n    this._data = undefined;\n    this._spec = undefined;\n    this.updateView();\n  }\n}\n\nexport class VegaView implements m.ClassComponent<VegaViewAttrs> {\n  private wrapper?: VegaWrapper;\n  private resize?: Disposable;\n\n  oncreate({dom, attrs}: m.CVnodeDOM<VegaViewAttrs>) {\n    const wrapper = new VegaWrapper(dom.firstElementChild!);\n    wrapper.spec = attrs.spec;\n    wrapper.data = attrs.data;\n    wrapper.engine = attrs.engine;\n    this.wrapper = wrapper;\n    this.resize = new SimpleResizeObserver(dom, () => {\n      wrapper.onResize();\n    });\n  }\n\n  onupdate({attrs}: m.CVnodeDOM<VegaViewAttrs>) {\n    if (this.wrapper) {\n      this.wrapper.spec = attrs.spec;\n      this.wrapper.data = attrs.data;\n      this.wrapper.engine = attrs.engine;\n    }\n  }\n\n  onremove() {\n    if (this.resize) {\n      this.resize[Symbol.dispose]();\n      this.resize = undefined;\n    }\n    if (this.wrapper) {\n      this.wrapper[Symbol.dispose]();\n      this.wrapper = undefined;\n    }\n  }\n\n  view(_: m.Vnode<VegaViewAttrs>) {\n    return m(\n      '.pf-vega-view',\n      m(''),\n      this.wrapper?.status === Status.Loading &&\n        m('.pf-vega-view-status', m(Spinner)),\n      this.wrapper?.status === Status.Error &&\n        m('.pf-vega-view-status', this.wrapper?.error ?? 'Error'),\n    );\n  }\n}\n"]}