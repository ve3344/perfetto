{"version":3,"file":"chart_tab.js","sourceRoot":"","sources":["../../../../../src/components/widgets/charts/chart_tab.ts"],"names":[],"mappings":";AAAA,qDAAqD;AACrD,EAAE;AACF,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,kDAAkD;AAClD,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;;AASjC,kCAEC;;AATD,8DAAwB;AACxB,kEAA4D;AAC5D,uDAAuD;AACvD,uEAAgE;AAEhE,mCAAiE;AAEjE,SAAgB,WAAW,CAAC,KAAY;IACtC,IAAA,mCAAe,EAAC,cAAc,EAAE,IAAI,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;AACvD,CAAC;AAED,MAAa,QAAQ;IACU;IAA7B,YAA6B,KAAY;QAAZ,UAAK,GAAL,KAAK,CAAO;IAAG,CAAC;IAE7C,MAAM;QACJ,OAAO,IAAA,iBAAC,EACN,4BAAY,EACZ;YACE,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE;YACtB,WAAW,EAAE,IAAI,CAAC,cAAc,EAAE;SACnC,EACD,IAAA,4BAAoB,EAAC,IAAI,CAAC,KAAK,CAAC,CACjC,CAAC;IACJ,CAAC;IAED,QAAQ;QACN,OAAO,GAAG,IAAA,mBAAW,EAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,WAAW,CAAC,YAAY,CAAC;IACnE,CAAC;IAEO,cAAc;QACpB,IAAI,IAAI,GAAG,0BAA0B,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,IAAI,EAAE,QAAQ,CAAC;QAElF,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YACtE,IAAI,IAAI,SAAS,CAAC;YAClB,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAA,oBAAW,EAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1E,CAAC;QAED,OAAO,IAAI,CAAC;IACd,CAAC;CACF;AA5BD,4BA4BC","sourcesContent":["// Copyright (C) 2024 The Android Open Source Project\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport m from 'mithril';\nimport {DetailsShell} from '../../../widgets/details_shell';\nimport {filterTitle} from '../sql/legacy_table/column';\nimport {addEphemeralTab} from '../../details/add_ephemeral_tab';\nimport {Tab} from '../../../public/tab';\nimport {Chart, renderChartComponent, toTitleCase} from './chart';\n\nexport function addChartTab(chart: Chart): void {\n  addEphemeralTab('histogramTab', new ChartTab(chart));\n}\n\nexport class ChartTab implements Tab {\n  constructor(private readonly chart: Chart) {}\n\n  render() {\n    return m(\n      DetailsShell,\n      {\n        title: this.getTitle(),\n        description: this.getDescription(),\n      },\n      renderChartComponent(this.chart),\n    );\n  }\n\n  getTitle(): string {\n    return `${toTitleCase(this.chart.config.columnTitle)} Histogram`;\n  }\n\n  private getDescription(): string {\n    let desc = `Count distribution for ${this.chart.config.tableDisplay ?? ''} table`;\n\n    if (this.chart.config.filters && this.chart.config.filters.length > 0) {\n      desc += ' where ';\n      desc += this.chart.config.filters.map((f) => filterTitle(f)).join(', ');\n    }\n\n    return desc;\n  }\n}\n"]}