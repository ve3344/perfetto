{"version":3,"file":"custom_sql_table_slice_track_unittest.js","sourceRoot":"","sources":["../../../../src/components/tracks/custom_sql_table_slice_track_unittest.ts"],"names":[],"mappings":";AAAA,qDAAqD;AACrD,EAAE;AACF,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,kDAAkD;AAClD,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;AAGjC,iFAGwC;AAGxC,QAAQ,CAAC,uCAAuC,EAAE,GAAG,EAAE;IACrD,IAAI,CAAC,cAAc,EAAE,GAAG,EAAE;QACxB,MAAM,KAAM,SAAQ,uDAAwB;YAC1C,gBAAgB;gBACd,OAAO;oBACL,YAAY,EAAE,UAAU;iBACzB,CAAC;YACJ,CAAC;SACF;QAED,MAAM,GAAG,GAAG,IAAI,KAAK,CAAC,SAA6B,EAAE,KAAK,CAAC,CAAC;QAC5D,MAAM,OAAO,GAAG,GAAG,CAAC,UAAU,EAAmB,CAAC;QAElD,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;IACrD,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,iBAAiB,EAAE,GAAG,EAAE;QAC3B,MAAM,KAAM,SAAQ,uDAAwB;YAC1C,gBAAgB;gBACd,OAAO;oBACL,OAAO,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;oBAC9B,YAAY,EAAE,UAAU;iBACzB,CAAC;YACJ,CAAC;SACF;QAED,MAAM,GAAG,GAAG,IAAI,KAAK,CAAC,SAA6B,EAAE,KAAK,CAAC,CAAC;QAC5D,MAAM,OAAO,GAAG,GAAG,CAAC,UAAU,EAAmB,CAAC;QAElD,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,kCAAkC,CAAC,CAAC;IAC/D,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,yBAAyB,EAAE,GAAG,EAAE;QACnC,MAAM,KAAM,SAAQ,uDAAwB;YAC1C,gBAAgB;gBACd,OAAO;oBACL,YAAY,EAAE,UAAU;oBACxB,OAAO,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;oBAC9B,WAAW,EAAE,WAAW;iBACzB,CAAC;YACJ,CAAC;SACF;QAED,MAAM,GAAG,GAAG,IAAI,KAAK,CAAC,SAA6B,EAAE,KAAK,CAAC,CAAC;QAC5D,MAAM,OAAO,GAAG,GAAG,CAAC,UAAU,EAAmB,CAAC;QAElD,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CACtB,kDAAkD,CACnD,CAAC;IACJ,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright (C) 2024 The Android Open Source Project\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Trace} from '../../public/trace';\nimport {\n  CustomSqlTableDefConfig,\n  CustomSqlTableSliceTrack,\n} from './custom_sql_table_slice_track';\nimport {SourceDataset} from '../../trace_processor/dataset';\n\ndescribe('CustomSqlTableSliceTrack.getDataset()', () => {\n  test('simple track', () => {\n    class Track extends CustomSqlTableSliceTrack {\n      getSqlDataSource(): CustomSqlTableDefConfig {\n        return {\n          sqlTableName: 'footable',\n        };\n      }\n    }\n\n    const foo = new Track(undefined as unknown as Trace, 'foo');\n    const dataset = foo.getDataset() as SourceDataset;\n\n    expect(dataset.src).toBe('SELECT * FROM footable');\n  });\n\n  test('track with cols', () => {\n    class Track extends CustomSqlTableSliceTrack {\n      getSqlDataSource(): CustomSqlTableDefConfig {\n        return {\n          columns: ['foo', 'bar', 'baz'],\n          sqlTableName: 'footable',\n        };\n      }\n    }\n\n    const foo = new Track(undefined as unknown as Trace, 'foo');\n    const dataset = foo.getDataset() as SourceDataset;\n\n    expect(dataset.src).toBe('SELECT foo,bar,baz FROM footable');\n  });\n\n  test('track with where clause', () => {\n    class Track extends CustomSqlTableSliceTrack {\n      getSqlDataSource(): CustomSqlTableDefConfig {\n        return {\n          sqlTableName: 'footable',\n          columns: ['foo', 'bar', 'baz'],\n          whereClause: 'bar = 123',\n        };\n      }\n    }\n\n    const foo = new Track(undefined as unknown as Trace, 'foo');\n    const dataset = foo.getDataset() as SourceDataset;\n\n    expect(dataset.src).toBe(\n      'SELECT foo,bar,baz FROM footable WHERE bar = 123',\n    );\n  });\n});\n"]}